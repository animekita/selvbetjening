{% load webdesign %}

{% extends "site.html" %}

{% block breadcrumbs %}
<li><a href="{% url members_profile %}">profil</a></li>
{% endblock %}

{% block contenthead %}
<h2>Velkommen {% if user.first_name %}{{user.first_name}} {{user.last_name}}{% else %}{{user.username}}{% endif %}</h2>
{% endblock %}

{% block content %}
<p>På denne side kan du se de oplysninger vi har registreret for din bruger. Vi beder dig venligst holde disse oplysninger opdateret. Nederst på siden kan du også se de arrangementer som du har deltaget i, er tilmeldt eller kan tilmelde dig.</p>

<h3>Personoplysninger</h3>

<table class="vertical">
<tr>
    <th>Navn</th>
    <td>{{user.first_name}} {{user.last_name}}</td>
</tr>
<tr>
    <th>Fødselsdag</th>
    <td>{{user.get_profile.dateofbirth|date:"d/m - Y"}}</td>
</tr>
<tr>
    <th>Alder</th>
    <td>{{user.get_profile.age}}</td>
</tr>
<tr>
    <th>Email</th>
    <td>{{user.email}}</td>
</tr>
<tr>
    <th>Må vi sende emails til dig?</th>
    <td>{{user.get_profile.send_me_email|yesno}}</td>
</tr>
<tr>
    <th>Telefon #</th>
    <td >{% if user.get_profile.phonenumber %}{{user.get_profile.phonenumber}}{% endif %}</td>
</tr>
<tr>
    <th>Gade</th>
    <td >{{user.get_profile.street}}</td>
</tr>
<tr>
    <th>Postnummer &amp; by</th>
    <td>{% if user.get_profile.postalcode %}{{user.get_profile.postalcode}}{% endif %} {{user.get_profile.city}}</td>
</tr>
</table>
<ul class="table-options">
    <li>&#187; <a href="{% url members_editprofile %}">Ændre personoplysninger</a></li>
    <li>&#187; <a href="{% url members_change_email %}">Skift email</a></li>
</ul>
<br />
<h3>Brugeroplysninger</h3>
<table class="vertical">
<tr>
    <th>Brugernavn</th>
    <td>{{user.username}}</td>
</tr>
<tr>
    <th>Kodeord</th>
    <td>**********</td>
</tr>
</table>
<ul class="table-options">
    <li>&#187; <a href="{% url auth_password_change %}">Ændre kodeord</a></li>
</ul>
<br />

{% ifnotequal membership_status "INACTIVE" %}

<h3>Medlemsstatus</h3>
{% ifequal membership_status "ACTIVE" %}
<p>Du har betalt kontingent den {{membership_date.date|date:"d/m Y"}} og dit kontingent gælder indtil den {{membership_to|date:"d/m Y"}}.</p>
{% endifequal %}

{% ifequal membership_status "CONDITIONAL_ACTIVE" %}
<p>Du har betalt første halvdel af dit kontingent den {{membership_date.date|date:"d/m Y"}} og dit kontingent gælder indtil den {{membership_to|date:"d/m Y"}}.</p>
{% endifequal %}

{% ifequal membership_status "PASSIVE" %}
<p>Du har ikke fornyet dit kontingent, du vil derfor blive regnet som passivt medlem indtil den {{membership_passive_to|date:"d/m Y"}}.</p>
{% endifequal %}

{% endifnotequal %}

<h3>Arrangementer</h3>
    <table class="horizontal">
    <tr>
        <th>Navn</th>
        <th>Dato</th>
        <th>År</th>
        <th>&nbsp;
    </tr>
    
    {% for event in events_new %}
        <tr>
            <td><a href="{% url events_view event.id %}">{{event.title}}</a></td>
            <td>{{event.startdate.day}}/{{event.startdate.month}} - {{event.enddate.day}}/{{event.enddate.month}}</td>
            <td>{{event.startdate.year}}</td>
            <td>{% if event.registration_open %}Åben for tilmelding{% endif %}</td>
        </tr>
    {% endfor %}
    
    {% for attend in attends %}
        <tr>
            <td><a href="{% url events_view attend.event.id %}">{{attend.event.title}}</a></td>
            <td>{{attend.event.startdate.day}}/{{attend.event.startdate.month}} - {{attend.event.enddate.day}}/{{attend.event.enddate.month}}</td>
            <td>{{attend.event.startdate.year}}</td>
            <td>Tilmeldt{% if attend.event.has_been_held %} / Afholdt{% endif %}</td>
        </tr>
    {% endfor %}
    
    {% if not attends and not events_new %}
        <tr>
            <td colspan="4">Ingen nævnværdige arrangementer.</td>
        </tr>
    {% endif %}
    </table>
    
{% endblock %}