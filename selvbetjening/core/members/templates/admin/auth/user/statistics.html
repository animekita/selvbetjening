{% extends "admin/base_site.html" %}

{% load i18n admin_modify adminmedia %}

{% block breadcrumbs %}{% if not is_popup %}
<div class="breadcrumbs">
     <a href="../../../../">{% trans "Home" %}</a> &rsaquo;
     <a href="../../../">Auth</a> &rsaquo;
     <a href="../../">User</a> &rsaquo;
     Statistik
</div>
{% endif %}{% endblock %}

{% block extrahead %}{{block.super}}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}js/highcharts/highcharts.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}js/highcharts/excanvas.compiled.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function() {

var chart1 = new Highcharts.Chart({
   chart: {
      renderTo: 'agechart',
      defaultSeriesType: 'line',
      margin: [50, 150, 60, 80]
   },
   title: {
      text: 'Bruger alder',
      style: {
         margin: '10px 100px 0 0' // center it
      }
   },
   xAxis: {
      categories: {{age_labels}},
      title: {
         text: 'Alder'
      }
   },
   yAxis: {
      title: {
         text: 'Antal'
      },
      plotLines: [{
         value: 0,
         width: 1,
         color: '#808080'
      }]
   },
   tooltip: {
      formatter: function() {
                return '<b>Alder</b> ' + this.x + '<br><b>Antal</b> ' + this.y;
      }
   },
   legend: {
      layout: 'vertical',
      style: {
         left: 'auto',
         bottom: 'auto',
         right: '10px',
         top: '100px'
      }
   },
   series: [{
      name: 'Alle brugere',
      data: {{age_data}}
   }]
});

var chart2 = new Highcharts.Chart({
   chart: {
      renderTo: 'joinchart',
      defaultSeriesType: 'line',
      margin: [50, 150, 60, 80]
   },
   title: {
      text: 'Antal brugere',
      style: {
         margin: '10px 100px 0 0' // center it
      }
   },
   xAxis: {
      categories: {{join_labels|safe}},
      title: {
         text: 'Dato'
      },
      labels: {
         rotation: 45,
         align: 'right',
      }
   },
   yAxis: {
      title: {
         text: 'Antal'
      },
      plotLines: [{
         value: 0,
         width: 1,
         color: '#808080'
      }]
   },
   tooltip: {
      formatter: function() {
                return '<b>Dato</b> ' + this.x + '<br><b>Antal</b> ' + this.y;
      }
   },
   legend: {
      layout: 'vertical',
      style: {
         left: 'auto',
         bottom: 'auto',
         right: '10px',
         top: '100px'
      }
   },
   series: [{
      name: 'Nye brugere',
      data: {{join_data1}}
   },
   {
      name: 'Brugere akkumuleret',
      data: {{join_data2}}
   }]
});

});
</script>
{% endblock %}

{% block content_title %}

<h1>Bruger statistik</h1>
{% endblock %}

{% block content %}

{{age_span}}

<div id="agechart" style="width:800px; height: 400px;"></div>

Overst책ende graf viser alle personer hvis alder er mellem {{min}} og {{max}} 책r. Kun personer i intervallet {{min_limit}}-{{max_limit}} 책r er taget med. Gennemsnitsalderen er {{avg|floatformat}} 책r.

<div id="joinchart" style="width:800px; height: 400px;"></div>

{% endblock %}